# 全家營養餐點推薦系統

這是一個幫助使用者根據個人營養需求，隨機搭配並推薦全家便利商店食物的應用程式。系統會根據使用者輸入的總熱量、碳水化合物、蛋白質、脂肪等營養素，智慧地組合出符合需求的一日三餐。

## 功能特色

*   **客製化營養需求**：使用者可輸入總熱量、碳水化合物、蛋白質、脂肪、飽和脂肪、反式脂肪、鈉、糖等營養素的目標值。
*   **智慧餐點推薦**：
    *   對於使用者有填寫的營養素，推薦的餐點總量會嚴格控制在目標值的 ±10% 範圍內（蛋白質除外）。
    *   **蛋白質特例**：如果使用者輸入蛋白質目標，推薦總量需大於或等於目標值的 90%，無上限限制。
    *   單一餐點中的食物不會重複出現。
*   **營養超標警示**：
    *   僅針對「飽和脂肪」、「反式脂肪」、「糖」、「鈉」這四項，當其總量超過衛福部每日建議標準時，會以紅字標示。
    *   對於使用者未填寫的營養素，系統會盡量避免其超標。
*   **直觀的營養資訊顯示**：滑鼠懸停在推薦食物上時，會顯示該食物的詳細營養成分。
*   **響應式介面設計**：介面針對不同尺寸的螢幕（從 4 吋手機到 17 吋電腦）進行了優化，提供良好的閱讀體驗。
*   **「再推薦一次」功能**：如果對當前推薦不滿意，可以重新生成。

## 技術棧

*   **後端**：Python Flask
    *   數據處理：Pandas
    *   網頁請求：Requests
    *   HTML 解析：BeautifulSoup
*   **前端**：純 JavaScript, HTML, CSS
*   **數據儲存**：`products.json` (包含全家商品營養資訊)
*   **部署**：Docker

## 環境建置與執行

請確保您的系統已安裝 Python 3.9+ 和 `pip`。

### 1. 後端設定

1.  **進入後端目錄**：
    ```bash
    cd familymart-meal-planner/backend
    ```

2.  **建立並啟用虛擬環境**：
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **安裝 Python 依賴**：
    ```bash
    pip install -r requirements.txt
    ```

4.  **獲取產品數據**：
    運行 `scraper.py` 來抓取全家商品的營養資訊並生成 `products.json` 檔案。這個檔案將作為後端數據來源。
    ```bash
    python scraper.py
    ```
    *注意：此步驟可能需要一些時間，因為它會遍歷所有產品頁面。*

5.  **啟動 Flask 後端伺服器**：
    ```bash
    python app.py
    ```
    伺服器將在 `http://127.0.0.1:5001` 運行。

### 2. 前端設定

前端檔案 (HTML, CSS, JavaScript) 已整合到 Flask 應用程式中，無需單獨啟動前端伺服器。

### 3. 訪問應用程式

在 Flask 後端伺服器運行後，在您的瀏覽器中打開：

```
http://127.0.0.1:5001
```

您將看到應用程式的前端介面。

## Docker 部署

為了方便部署，我們提供了 `Dockerfile`。您可以使用 Docker 將整個應用程式容器化。

1.  **確保您位於專案的根目錄** (`familymart-meal-planner/`)。

2.  **建置 Docker 映像**：
    ```bash
    docker build -t familymart-meal-planner .
    ```

3.  **運行 Docker 容器**：
    ```bash
    docker run -p 5001:5001 familymart-meal-planner
    ```
    應用程式將在 `http://localhost:5001` 運行。

## 公開訪問 (使用 ngrok)

如果您想讓其他人也能訪問您的本地應用程式，可以使用 `ngrok`。

1.  **確保您的 Flask 應用程式正在運行** (如上述步驟 1.5 所示)。

2.  **啟動 ngrok 隧道**：
    ```bash
    ngrok http 5001
    ```

3.  `ngrok` 將在您的終端機中提供一個公共 URL (例如 `https://<random-subdomain>.ngrok-free.app`)。將此 URL 分享給其他人即可。

